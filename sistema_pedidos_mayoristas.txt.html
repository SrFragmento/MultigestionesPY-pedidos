&lt;!DOCTYPE html&gt;<br/>&lt;html lang=&quot;es&quot;&gt;<br/>&lt;head&gt;<br/>    &lt;meta charset=&quot;UTF-8&quot;&gt;<br/>    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br/>    &lt;title&gt;Sistema de Pedidos Mayoristas&lt;/title&gt;<br/>    &lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;<br/>    &lt;!-- Firebase SDKs --&gt;<br/>    &lt;script type=&quot;module&quot;&gt;<br/>        import { initializeApp } from &quot;https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js&quot;;<br/>        import { getAuth, signInAnonymously, signInWithCustomToken } from &quot;https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js&quot;;<br/>        import { getFirestore, collection, addDoc, serverTimestamp, setLogLevel } from &quot;https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js&quot;;<br/>        <br/>        // Configuraci√≥n Global de Firebase (MANDATORIA)<br/>        const appId = typeof __app_id !== &#39;undefined&#39; ? __app_id : &#39;default-app-id&#39;;<br/>        const firebaseConfig = typeof __firebase_config !== &#39;undefined&#39; ? JSON.parse(__firebase_config) : null;<br/>        const initialAuthToken = typeof __initial_auth_token !== &#39;undefined&#39; ? __initial_auth_token : null;<div></div>        // Variables globales para la aplicaci√≥n<br/>        window.app = null;<br/>        window.db = null;<br/>        window.auth = null;<br/>        <br/>        setLogLevel(&#39;debug&#39;); // Activar logs de Firebase<div></div>        // Inicializar Firebase<br/>        if (firebaseConfig) {<br/>            window.app = initializeApp(firebaseConfig);<br/>            window.db = getFirestore(window.app);<br/>            window.auth = getAuth(window.app);<div></div>            // Funci√≥n de autenticaci√≥n (usando el token proporcionado o an√≥nimamente)<br/>            const authenticate = async () =&gt; {<br/>                try {<br/>                    if (initialAuthToken) {<br/>                        await signInWithCustomToken(window.auth, initialAuthToken);<br/>                        console.log(&quot;Autenticaci√≥n exitosa con token personalizado.&quot;);<br/>                    } else {<br/>                        await signInAnonymously(window.auth);<br/>                        console.log(&quot;Autenticaci√≥n an√≥nima exitosa.&quot;);<br/>                    }<br/>                    // Una vez autenticado, inicializa la app principal<br/>                    window.mainApp.init(); <br/>                } catch (error) {<br/>                    console.error(&quot;Error de autenticaci√≥n de Firebase:&quot;, error);<br/>                    // Sustituimos alert por un mensaje de consola<br/>                    console.error(&quot;Error al conectar con la base de datos. Por favor, recarga la p√°gina.&quot;);<br/>                }<br/>            };<br/>            authenticate();<br/>        } else {<br/>            console.error(&quot;Configuraci√≥n de Firebase no disponible.&quot;);<br/>        }<div></div>        // Exportar funciones esenciales para el c√≥digo de la aplicaci√≥n<br/>        window.firebaseExports = {<br/>            addDoc,<br/>            collection,<br/>            serverTimestamp,<br/>        };<br/>    &lt;/script&gt;<br/>    &lt;style&gt;<br/>        :root {<br/>            font-family: &#39;Inter&#39;, sans-serif;<br/>        }<br/>        body {<br/>            background-color: #e0e7ff;<br/>            padding: 1rem;<br/>        }<br/>        .card {<br/>            background-color: #ffffff;<br/>            border-radius: 20px;<br/>            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);<br/>            overflow: hidden;<br/>        }<br/>        .header {<br/>            background-color: #1a202c;<br/>            color: white;<br/>            padding: 2.5rem 1.5rem 1.5rem;<br/>            text-align: center;<br/>        }<br/>        .brand-title {<br/>            background-color: #bfdbfe;<br/>            color: #1e3a8a;<br/>            padding: 8px 16px;<br/>            border-radius: 8px;<br/>            margin-top: 10px;<br/>            margin-bottom: 5px;<br/>            font-weight: 700;<br/>            text-transform: uppercase;<br/>            font-size: 0.9rem;<br/>        }<br/>        .price-badge {<br/>            background-color: #f59e0b;<br/>            color: #000000;<br/>            font-weight: 800;<br/>            padding: 0.4rem 0.8rem;<br/>            border-radius: 9999px;<br/>            font-size: 0.9rem;<br/>            margin-bottom: 4px;<br/>            display: inline-block;<br/>        }<br/>        .logo-placeholder {<br/>            width: 56px;<br/>            height: 56px;<br/>            display: flex;<br/>            align-items: center;<br/>            justify-content: center;<br/>            font-size: 11px;<br/>            font-weight: 700;<br/>            color: white;<br/>            border-radius: 12px;<br/>            text-align: center;<br/>            line-height: 1.2;<br/>            padding: 4px;<br/>            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);<br/>            flex-shrink: 0;<br/>        }<br/>        .filter-button.active {<br/>            background-color: #3b82f6;<br/>            color: white;<br/>            font-weight: 600;<br/>            border-color: #1d4ed8;<br/>        }<br/>        .cart-item-list {<br/>            max-height: 400px;<br/>            overflow-y: auto;<br/>        }<br/>        .qty-control button {<br/>            background-color: #e5e7eb;<br/>            width: 30px;<br/>            height: 30px;<br/>            font-size: 1.2rem;<br/>            line-height: 1;<br/>            padding: 0;<br/>            transition: background-color 0.1s;<br/>        }<br/>        .qty-control button:hover {<br/>            background-color: #d1d5db;<br/>        }<br/>        .qty-control input {<br/>            width: 40px;<br/>            text-align: center;<br/>            font-weight: bold;<br/>            border: none;<br/>            padding: 0;<br/>            margin: 0 2px;<br/>            height: 30px;<br/>        }<br/>    &lt;/style&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<div></div>    &lt;div class=&quot;max-w-4xl mx-auto card mt-4 mb-16&quot;&gt;<div></div>        &lt;!-- Header y Contacto --&gt;<br/>        &lt;header class=&quot;header&quot;&gt;<br/>            &lt;h1 class=&quot;text-4xl font-extrabold mb-1 tracking-wider&quot;&gt;SISTEMA DE PEDIDOS MAYORISTAS&lt;/h1&gt;<br/>            &lt;p class=&quot;text-xl font-light opacity-90 mb-4&quot;&gt;MULTIGESTIONES PY&lt;/p&gt;<br/>            &lt;p class=&quot;text-lg font-medium bg-red-700 text-white p-2 rounded-lg&quot;&gt;<br/>                üö® Venta M√≠nima 3 Unidades por Art√≠culo (Abarrotes/Snacks) üö®<br/>            &lt;/p&gt;<br/>        &lt;/header&gt;<div></div>        &lt;main class=&quot;p-4 sm:p-8&quot;&gt;<div></div>            &lt;!-- VISTA DEL CAT√ÅLOGO --&gt;<br/>            &lt;div id=&quot;catalog-view&quot;&gt;<br/>                <br/>                &lt;div class=&quot;flex justify-between items-center mb-6 border-b pb-4&quot;&gt;<br/>                    &lt;h2 class=&quot;text-2xl font-bold text-gray-800&quot;&gt;Cat√°logo de Productos&lt;/h2&gt;<br/>                    &lt;button id=&quot;view-cart-btn&quot; class=&quot;bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-full shadow-lg transition duration-200 flex items-center&quot;&gt;<br/>                        &lt;svg class=&quot;w-5 h-5 mr-2&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; stroke-width=&quot;2&quot; d=&quot;M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;<br/>                        Ver Carrito (&lt;span id=&quot;cart-count&quot;&gt;0&lt;/span&gt;)<br/>                    &lt;/button&gt;<br/>                &lt;/div&gt;<br/>                <br/>                &lt;!-- Filtros --&gt;<br/>                &lt;div class=&quot;mb-8&quot;&gt;<br/>                    &lt;div id=&quot;filter-container&quot; class=&quot;flex flex-wrap gap-2 sm:gap-4&quot;&gt;<br/>                        &lt;!-- Botones de Categor√≠a se insertar√°n aqu√≠ --&gt;<br/>                    &lt;/div&gt;<br/>                &lt;/div&gt;<div></div>                &lt;!-- Lista de Productos --&gt;<br/>                &lt;div id=&quot;product-list&quot; class=&quot;space-y-2&quot;&gt;<br/>                    &lt;!-- Los productos se insertar√°n aqu√≠ por JavaScript --&gt;<br/>                &lt;/div&gt;<div></div>                &lt;div id=&quot;loading-indicator&quot; class=&quot;text-center py-10 text-xl text-gray-500 hidden&quot;&gt;Conectando con la base de datos...&lt;/div&gt;<br/>            &lt;/div&gt;<div></div><br/>            &lt;!-- VISTA DEL CARRITO Y FORMULARIO DE CONFIRMACI√ìN --&gt;<br/>            &lt;div id=&quot;cart-view&quot; class=&quot;hidden&quot;&gt;<br/>                &lt;button id=&quot;back-to-catalog-btn&quot; class=&quot;text-blue-600 hover:text-blue-800 font-medium mb-6 flex items-center&quot;&gt;<br/>                    &lt;svg class=&quot;w-4 h-4 mr-1&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; stroke-width=&quot;2&quot; d=&quot;M10 19l-7-7m0 0l7-7m-7 7h18&quot;&gt;&lt;/path&gt;&lt;/svg&gt;<br/>                    Volver al Cat√°logo<br/>                &lt;/button&gt;<div></div>                &lt;h2 class=&quot;text-3xl font-bold text-gray-800 mb-6 border-b pb-2&quot;&gt;Resumen de Pedido&lt;/h2&gt;<div></div>                &lt;div id=&quot;cart-summary&quot; class=&quot;bg-gray-50 p-4 rounded-xl mb-6&quot;&gt;<br/>                    &lt;div id=&quot;cart-item-details&quot; class=&quot;cart-item-list space-y-3 mb-4&quot;&gt;<br/>                        &lt;!-- Detalles del carrito aqu√≠ --&gt;<br/>                        &lt;p id=&quot;empty-cart-message&quot; class=&quot;text-gray-500 text-center py-4&quot;&gt;El carrito est√° vac√≠o.&lt;/p&gt;<br/>                    &lt;/div&gt;<div></div>                    &lt;div class=&quot;flex justify-between items-center pt-3 border-t border-gray-200&quot;&gt;<br/>                        &lt;span class=&quot;text-xl font-bold text-gray-900&quot;&gt;Total a Pagar (Gs.):&lt;/span&gt;<br/>                        &lt;span id=&quot;cart-total&quot; class=&quot;text-2xl font-extrabold text-red-600&quot;&gt;Gs. 0&lt;/span&gt;<br/>                    &lt;/div&gt;<br/>                    &lt;p id=&quot;min-qty-alert&quot; class=&quot;text-sm text-red-600 mt-2 font-medium hidden&quot;&gt;‚ö†Ô∏è **ATENCI√ìN:** Tienes art√≠culos de Abarrotes con menos de 3 unidades. Por favor, ajusta las cantidades.&lt;/p&gt;<br/>                &lt;/div&gt;<div></div>                &lt;!-- Formulario de Cliente --&gt;<br/>                &lt;h3 class=&quot;text-2xl font-bold text-gray-800 mb-4&quot;&gt;Datos del Cliente&lt;/h3&gt;<br/>                &lt;form id=&quot;client-form&quot; class=&quot;space-y-4&quot;&gt;<br/>                    &lt;div&gt;<br/>                        &lt;label for=&quot;client-name&quot; class=&quot;block text-sm font-medium text-gray-700&quot;&gt;Nombre o Raz√≥n Social&lt;/label&gt;<br/>                        &lt;input type=&quot;text&quot; id=&quot;client-name&quot; required class=&quot;mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border&quot;&gt;<br/>                    &lt;/div&gt;<br/>                    &lt;div&gt;<br/>                        &lt;label for=&quot;client-phone&quot; class=&quot;block text-sm font-medium text-gray-700&quot;&gt;Tel√©fono / WhatsApp&lt;/label&gt;<br/>                        &lt;input type=&quot;text&quot; id=&quot;client-phone&quot; required class=&quot;mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border&quot;&gt;<br/>                    &lt;/div&gt;<br/>                    &lt;div&gt;<br/>                        &lt;label for=&quot;client-address&quot; class=&quot;block text-sm font-medium text-gray-700&quot;&gt;Direcci√≥n de Entrega&lt;/label&gt;<br/>                        &lt;textarea id=&quot;client-address&quot; required class=&quot;mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border&quot;&gt;&lt;/textarea&gt;<br/>                    &lt;/div&gt;<div></div>                    &lt;button type=&quot;submit&quot; id=&quot;confirm-order-btn&quot; class=&quot;w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-xl shadow-lg transition duration-200 disabled:opacity-50&quot; disabled&gt;<br/>                        &lt;span id=&quot;btn-text&quot;&gt;CONFIRMAR PEDIDO Y ENVIAR&lt;/span&gt;<br/>                    &lt;/button&gt;<br/>                    &lt;p id=&quot;order-status&quot; class=&quot;text-center mt-3 font-medium hidden&quot;&gt;&lt;/p&gt;<br/>                &lt;/form&gt;<br/>            &lt;/div&gt;<div></div>            &lt;!-- MODAL DE CONFIRMACI√ìN DE ENV√çO --&gt;<br/>            &lt;div id=&quot;confirmation-modal&quot; class=&quot;hidden fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50&quot;&gt;<br/>                &lt;div class=&quot;bg-white p-8 rounded-xl shadow-2xl max-w-sm w-full text-center&quot;&gt;<br/>                    &lt;svg class=&quot;w-16 h-16 text-green-500 mx-auto mb-4&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; stroke-width=&quot;2&quot; d=&quot;M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;<br/>                    &lt;h3 class=&quot;text-xl font-bold text-gray-900 mb-3&quot;&gt;¬°Pedido Enviado con √âxito!&lt;/h3&gt;<br/>                    &lt;p class=&quot;text-gray-600 mb-6&quot;&gt;Tu orden ha sido registrada. Pronto nos contactaremos al n√∫mero proporcionado.&lt;/p&gt;<br/>                    &lt;button id=&quot;close-modal-btn&quot; class=&quot;bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200&quot;&gt;<br/>                        Volver al inicio<br/>                    &lt;/button&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<div></div>        &lt;/main&gt;<br/>    &lt;/div&gt;<div></div>    &lt;script&gt;<br/>        // Precios en Guaran√≠es (Gs.)<br/>        const PRODUCTS = [<br/>            // CATEROR√çA DE ALQUILER PARA EVENTOS (M√≠nimo 1)<br/>            { id: 1, name: &quot;Silla Pl√°stica Reforzada&quot;, brand: &quot;Servicios&quot;, presentation: &quot;Unidad/Evento&quot;, price: 1500, category: &quot;Alquiler Eventos&quot;, logoColor: &quot;#34d399&quot;, logoText: &quot;Silla ü™ë&quot;, isRental: true, min: 1 },<br/>            { id: 2, name: &quot;Mesa Redonda (10 personas)&quot;, brand: &quot;Servicios&quot;, presentation: &quot;Unidad/Evento&quot;, price: 15000, category: &quot;Alquiler Eventos&quot;, logoColor: &quot;#34d399&quot;, logoText: &quot;Mesa üçΩÔ∏è&quot;, isRental: true, min: 1 },<br/>            { id: 3, name: &quot;Mesa Larga (8 personas)&quot;, brand: &quot;Servicios&quot;, presentation: &quot;Unidad/Evento&quot;, price: 12000, category: &quot;Alquiler Eventos&quot;, logoColor: &quot;#34d399&quot;, logoText: &quot;Mesa üìè&quot;, isRental: true, min: 1 },<br/>            { id: 4, name: &quot;Mantel Blanco de Tela&quot;, brand: &quot;Servicios&quot;, presentation: &quot;Unidad/Evento&quot;, price: 7000, category: &quot;Alquiler Eventos&quot;, logoColor: &quot;#fcd34d&quot;, logoText: &quot;Mantel&quot;, isRental: true, min: 1 },<br/>            { id: 5, name: &quot;Cubiertos Met√°licos (Set)&quot;, brand: &quot;Servicios&quot;, presentation: &quot;Set/Evento&quot;, price: 800, category: &quot;Alquiler Eventos&quot;, logoColor: &quot;#94a3b8&quot;, logoText: &quot;Cubiertos&quot;, isRental: true, min: 1 },<br/>            { id: 6, name: &quot;Cubre Sillas&quot;, brand: &quot;Servicios&quot;, presentation: &quot;Unidad/Evento&quot;, price: 1000, category: &quot;Alquiler Eventos&quot;, logoColor: &quot;#fcd34d&quot;, logoText: &quot;Cubre&quot;, isRental: true, min: 1 },<br/>            { id: 7, name: &quot;Plato Cer√°mica (Principal)&quot;, brand: &quot;Servicios&quot;, presentation: &quot;Unidad/Evento&quot;, price: 900, category: &quot;Alquiler Eventos&quot;, logoColor: &quot;#94a3b8&quot;, logoText: &quot;Plato&quot;, isRental: true, min: 1 },<br/>            { id: 8, name: &quot;Vasos de Cristal&quot;, brand: &quot;Servicios&quot;, presentation: &quot;Unidad/Evento&quot;, price: 700, category: &quot;Alquiler Eventos&quot;, logoColor: &quot;#94a3b8&quot;, logoText: &quot;Vaso&quot;, isRental: true, min: 1 },<br/>            { id: 9, name: &quot;Plato Pl√°stico Reforzado&quot;, brand: &quot;Pl√°sticos&quot;, presentation: &quot;Unidad/Evento&quot;, price: 600, category: &quot;Alquiler Eventos&quot;, logoColor: &quot;#38bdf8&quot;, logoText: &quot;Pl√°stico&quot;, isRental: true, min: 1 },<br/>            { id: 10, name: &quot;Vasos Pl√°sticos Reutilizables&quot;, brand: &quot;Pl√°sticos&quot;, presentation: &quot;Unidad/Evento&quot;, price: 500, category: &quot;Alquiler Eventos&quot;, logoColor: &quot;#38bdf8&quot;, logoText: &quot;Pl√°stico&quot;, isRental: true, min: 1 },<div></div>            // ABARROTES: L√ÅCTEOS (Mayorista - M√≠nimo 3)<br/>            { id: 11, name: &quot;Leche Entera UAT&quot;, brand: &quot;Tr√©bol&quot;, presentation: &quot;1 Litro&quot;, price: 8500, category: &quot;L√°cteos&quot;, logoColor: &quot;#059669&quot;, logoText: &quot;Tr√©bol&quot;, isRental: false, min: 3 },<br/>            { id: 12, name: &quot;Yogurt Entero Durazno&quot;, brand: &quot;Tr√©bol&quot;, presentation: &quot;1 Litro&quot;, price: 9200, category: &quot;L√°cteos&quot;, logoColor: &quot;#059669&quot;, logoText: &quot;Tr√©bol üçë&quot;, isRental: false, min: 3 },<br/>            { id: 13, name: &quot;Manteca Premium&quot;, brand: &quot;Tr√©bol&quot;, presentation: &quot;250g&quot;, price: 12500, category: &quot;L√°cteos&quot;, logoColor: &quot;#059669&quot;, logoText: &quot;Tr√©bol&quot;, isRental: false, min: 3 },<br/>            { id: 14, name: &quot;Postre Vainilla&quot;, brand: &quot;Tr√©bol&quot;, presentation: &quot;120g&quot;, price: 4000, category: &quot;L√°cteos&quot;, logoColor: &quot;#059669&quot;, logoText: &quot;Tr√©bol&quot;, isRental: false, min: 3 },<br/>            { id: 15, name: &quot;Leche Descremada UAT&quot;, brand: &quot;Lactolanda&quot;, presentation: &quot;1 Litro&quot;, price: 8800, category: &quot;L√°cteos&quot;, logoColor: &quot;#f59e0b&quot;, logoText: &quot;Landa&quot;, isRental: false, min: 3 },<br/>            { id: 16, name: &quot;Queso Paraguay Fresco&quot;, brand: &quot;Lactolanda&quot;, presentation: &quot;500g&quot;, price: 18500, category: &quot;L√°cteos&quot;, logoColor: &quot;#f59e0b&quot;, logoText: &quot;Landa üßÄ&quot;, isRental: false, min: 3 },<br/>            { id: 17, name: &quot;Dulce de Leche Cl√°sico&quot;, brand: &quot;Lactolanda&quot;, presentation: &quot;400g&quot;, price: 15000, category: &quot;L√°cteos&quot;, logoColor: &quot;#f59e0b&quot;, logoText: &quot;Landa&quot;, isRental: false, min: 3 },<br/>            { id: 18, name: &quot;Leche Cultivada&quot;, brand: &quot;Lactolanda&quot;, presentation: &quot;1 Litro&quot;, price: 9500, category: &quot;L√°cteos&quot;, logoColor: &quot;#f59e0b&quot;, logoText: &quot;Landa&quot;, isRental: false, min: 3 },<div></div>            // ABARROTES: BEBIDAS (Mayorista - M√≠nimo 3)<br/>            { id: 19, name: &quot;Coca-Cola Original&quot;, brand: &quot;Coca-Cola&quot;, presentation: &quot;2 Litros&quot;, price: 12000, category: &quot;Bebidas&quot;, logoColor: &quot;#e61818&quot;, logoText: &quot;COKE üî¥&quot;, isRental: false, min: 3 },<br/>            { id: 20, name: &quot;Coca-Cola Sin Az√∫car&quot;, brand: &quot;Coca-Cola&quot;, presentation: &quot;1.5 Litros&quot;, price: 9500, category: &quot;Bebidas&quot;, logoColor: &quot;#e61818&quot;, logoText: &quot;COKE Zero&quot;, isRental: false, min: 3 },<br/>            { id: 21, name: &quot;Gaseosa Fanta Naranja&quot;, brand: &quot;Coca-Cola&quot;, presentation: &quot;2 Litros&quot;, price: 10500, category: &quot;Bebidas&quot;, logoColor: &quot;#f97316&quot;, logoText: &quot;FANTA&quot;, isRental: false, min: 3 },<br/>            { id: 22, name: &quot;Jugo (Sabor Naranja)&quot;, brand: &quot;Pulp&quot;, presentation: &quot;1 Litro&quot;, price: 7500, category: &quot;Bebidas&quot;, logoColor: &quot;#f97316&quot;, logoText: &quot;Pulp üçä&quot;, isRental: false, min: 3 },<br/>            { id: 23, name: &quot;Cerveza Pilsen&quot;, brand: &quot;Brahma&quot;, presentation: &quot;Lata 350ml&quot;, price: 6000, category: &quot;Bebidas&quot;, logoColor: &quot;#fbbf24&quot;, logoText: &quot;Brahma üç∫&quot;, isRental: false, min: 3 },<br/>            { id: 24, name: &quot;Cerveza Lager&quot;, brand: &quot;Pilsen&quot;, presentation: &quot;Botella 1L&quot;, price: 11500, category: &quot;Bebidas&quot;, logoColor: &quot;#0369a1&quot;, logoText: &quot;Pilsen&quot;, isRental: false, min: 3 },<br/>            { id: 25, name: &quot;Agua Mineral sin Gas&quot;, brand: &quot;Salus&quot;, presentation: &quot;1.5 Litros&quot;, price: 4500, category: &quot;Bebidas&quot;, logoColor: &quot;#4c9cfd&quot;, logoText: &quot;Salus&quot;, isRental: false, min: 3 },<br/>            { id: 26, name: &quot;Cerveza Lata&quot;, brand: &quot;Heineken&quot;, presentation: &quot;330ml Lata&quot;, price: 7800, category: &quot;Bebidas&quot;, logoColor: &quot;#10b981&quot;, logoText: &quot;Heineken üç∫&quot;, isRental: false, min: 3 },<br/>            { id: 27, name: &quot;Gaseosa Guaran√°&quot;, brand: &quot;Guaran√°&quot;, presentation: &quot;2 Litros&quot;, price: 9000, category: &quot;Bebidas&quot;, logoColor: &quot;#3b82f6&quot;, logoText: &quot;Guaran√°&quot;, isRental: false, min: 3 },<br/>            { id: 28, name: &quot;Agua Saborizada Manzana&quot;, brand: &quot;Levit√©&quot;, presentation: &quot;600ml&quot;, price: 5500, category: &quot;Bebidas&quot;, logoColor: &quot;#22c55e&quot;, logoText: &quot;Levit√©&quot;, isRental: false, min: 3 },<br/>            { id: 29, name: &quot;Vino Tinto Seco&quot;, brand: &quot;Santa Helena&quot;, presentation: &quot;750ml&quot;, price: 35000, category: &quot;Bebidas&quot;, logoColor: &quot;#dc2626&quot;, logoText: &quot;Vino üç∑&quot;, isRental: false, min: 3 },<div></div>            // ABARROTES: NO PERECEDEROS (Mayorista - M√≠nimo 3)<br/>            { id: 30, name: &quot;Fideo Spaghetti&quot;, brand: &quot;Fortaleza&quot;, presentation: &quot;500g&quot;, price: 5000, category: &quot;Abarrotes&quot;, logoColor: &quot;#ef4444&quot;, logoText: &quot;Fuerza&quot;, isRental: false, min: 3 },<br/>            { id: 31, name: &quot;Fideo Tallar√≠n&quot;, brand: &quot;Adria&quot;, presentation: &quot;500g&quot;, price: 4800, category: &quot;Abarrotes&quot;, logoColor: &quot;#1d4ed8&quot;, logoText: &quot;Adria&quot;, isRental: false, min: 3 },<br/>            { id: 32, name: &quot;Arroz Grano Largo Tipo 1&quot;, brand: &quot;Universo&quot;, presentation: &quot;1Kg&quot;, price: 8500, category: &quot;Abarrotes&quot;, logoColor: &quot;#9333ea&quot;, logoText: &quot;Universo&quot;, isRental: false, min: 3 },<br/>            { id: 33, name: &quot;Harina de Trigo 000&quot;, brand: &quot;Hijo de Tigre&quot;, presentation: &quot;1Kg&quot;, price: 6500, category: &quot;Abarrotes&quot;, logoColor: &quot;#334155&quot;, logoText: &quot;Tigre&quot;, isRental: false, min: 3 },<br/>            { id: 34, name: &quot;Az√∫car Rubia&quot;, brand: &quot;Azucarera Nacional&quot;, presentation: &quot;1Kg&quot;, price: 5200, category: &quot;Abarrotes&quot;, logoColor: &quot;#fb7185&quot;, logoText: &quot;Az√∫car&quot;, isRental: false, min: 3 },<br/>            { id: 35, name: &quot;Sal Fina Yodada&quot;, brand: &quot;Marina&quot;, presentation: &quot;500g&quot;, price: 2500, category: &quot;Abarrotes&quot;, logoColor: &quot;#94a3b8&quot;, logoText: &quot;Marina&quot;, isRental: false, min: 3 },<br/>            { id: 36, name: &quot;Aceite Girasol&quot;, brand: &quot;Cocinero&quot;, presentation: &quot;900ml&quot;, price: 15000, category: &quot;Abarrotes&quot;, logoColor: &quot;#facc15&quot;, logoText: &quot;Cocinero&quot;, isRental: false, min: 3 },<br/>            { id: 37, name: &quot;Yerba Mate Cl√°sica&quot;, brand: &quot;Kurup√≠&quot;, presentation: &quot;500g&quot;, price: 15500, category: &quot;Abarrotes&quot;, logoColor: &quot;#22c55e&quot;, logoText: &quot;Kurup√≠&quot;, isRental: false, min: 3 },<br/>            { id: 38, name: &quot;Yerba Mate Compuesta&quot;, brand: &quot;Selecta&quot;, presentation: &quot;1Kg&quot;, price: 28000, category: &quot;Abarrotes&quot;, logoColor: &quot;#059669&quot;, logoText: &quot;Selecta&quot;, isRental: false, min: 3 },<br/>            { id: 39, name: &quot;Poroto Negro&quot;, brand: &quot;El Molino&quot;, presentation: &quot;1Kg&quot;, price: 9000, category: &quot;Abarrotes&quot;, logoColor: &quot;#9333ea&quot;, logoText: &quot;Molino&quot;, isRental: false, min: 3 },<br/>            { id: 40, name: &quot;Lentejas&quot;, brand: &quot;El Molino&quot;, presentation: &quot;500g&quot;, price: 6500, category: &quot;Abarrotes&quot;, logoColor: &quot;#9333ea&quot;, logoText: &quot;Molino&quot;, isRental: false, min: 3 },<br/>            { id: 41, name: &quot;Mayonesa Cl√°sica&quot;, brand: &quot;Hellmann&#39;s&quot;, presentation: &quot;500g Pote&quot;, price: 13000, category: &quot;Abarrotes&quot;, logoColor: &quot;#facc15&quot;, logoText: &quot;Hellman&#39;s&quot;, isRental: false, min: 3 },<br/>            { id: 42, name: &quot;Ketchup&quot;, brand: &quot;Heinz&quot;, presentation: &quot;397g&quot;, price: 11500, category: &quot;Abarrotes&quot;, logoColor: &quot;#ef4444&quot;, logoText: &quot;Heinz&quot;, isRental: false, min: 3 },<br/>            { id: 43, name: &quot;Caf√© Instant√°neo&quot;, brand: &quot;Nescaf√©&quot;, presentation: &quot;100g&quot;, price: 18000, category: &quot;Abarrotes&quot;, logoColor: &quot;#994d1b&quot;, logoText: &quot;Caf√©&quot;, isRental: false, min: 3 },<br/>            { id: 44, name: &quot;Mermelada Frutilla&quot;, brand: &quot;Arcor&quot;, presentation: &quot;400g&quot;, price: 9800, category: &quot;Abarrotes&quot;, logoColor: &quot;#dc2626&quot;, logoText: &quot;Arcor üçì&quot;, isRental: false, min: 3 },<br/>            { id: 45, name: &quot;Caldo Cubitos Carne&quot;, brand: &quot;Maggi&quot;, presentation: &quot;Caja x 12&quot;, price: 7000, category: &quot;Abarrotes&quot;, logoColor: &quot;#f97316&quot;, logoText: &quot;Maggi&quot;, isRental: false, min: 3 },<br/>            { id: 46, name: &quot;At√∫n en Aceite&quot;, brand: &quot;La Sirena&quot;, presentation: &quot;170g Lata&quot;, price: 11000, category: &quot;Abarrotes&quot;, logoColor: &quot;#0891b2&quot;, logoText: &quot;Sirena üêü&quot;, isRental: false, min: 3 },<br/>            { id: 47, name: &quot;Arvejas en Lata&quot;, brand: &quot;Arcor&quot;, presentation: &quot;300g Lata&quot;, price: 4500, category: &quot;Abarrotes&quot;, logoColor: &quot;#dc2626&quot;, logoText: &quot;Arcor&quot;, isRental: false, min: 3 },<br/>            { id: 48, name: &quot;Tomate Pelado Cubeteado&quot;, brand: &quot;Mutti&quot;, presentation: &quot;400g Lata&quot;, price: 8000, category: &quot;Abarrotes&quot;, logoColor: &quot;#b91c1c&quot;, logoText: &quot;Mutti&quot;, isRental: false, min: 3 },<br/>            { id: 49, name: &quot;Choclo en Grano&quot;, brand: &quot;Arcor&quot;, presentation: &quot;300g Lata&quot;, price: 5500, category: &quot;Abarrotes&quot;, logoColor: &quot;#dc2626&quot;, logoText: &quot;Arcor üåΩ&quot;, isRental: false, min: 3 },<br/>            { id: 50, name: &quot;Salsa de Tomate Lista&quot;, brand: &quot;Mutti&quot;, presentation: &quot;520g Botella&quot;, price: 9000, category: &quot;Abarrotes&quot;, logoColor: &quot;#b91c1c&quot;, logoText: &quot;Mutti&quot;, isRental: false, min: 3 },<div></div>            // ABARROTES: SNACKS (Mayorista - M√≠nimo 3)<br/>            { id: 51, name: &quot;Papas Fritas Onduladas&quot;, brand: &quot;Karup√°&quot;, presentation: &quot;60g&quot;, price: 3500, category: &quot;Snacks&quot;, logoColor: &quot;#7e22ce&quot;, logoText: &quot;Karup√° ü•î&quot;, isRental: false, min: 3 },<br/>            { id: 52, name: &quot;Chizitos Queso&quot;, brand: &quot;Do√±a&quot;, presentation: &quot;80g&quot;, price: 4200, category: &quot;Snacks&quot;, logoColor: &quot;#ca8a04&quot;, logoText: &quot;Do√±a üßÄ&quot;, isRental: false, min: 3 },<br/>            { id: 53, name: &quot;Galleta Chocolate Rellena&quot;, brand: &quot;Oreo&quot;, presentation: &quot;Pack&quot;, price: 6500, category: &quot;Snacks&quot;, logoColor: &quot;#1e3a8a&quot;, logoText: &quot;Oreo&quot;, isRental: false, min: 3 },<br/>            { id: 54, name: &quot;Alfajor Triple Chocolate&quot;, brand: &quot;Jorgito&quot;, presentation: &quot;Unidad&quot;, price: 4500, category: &quot;Snacks&quot;, logoColor: &quot;#0f766e&quot;, logoText: &quot;Jorgito&quot;, isRental: false, min: 3 },<br/>            { id: 55, name: &quot;Man√≠ Tostado Salado&quot;, brand: &quot;Manisa&quot;, presentation: &quot;100g&quot;, price: 4000, category: &quot;Snacks&quot;, logoColor: &quot;#84cc16&quot;, logoText: &quot;Manisa&quot;, isRental: false, min: 3 },<br/>            { id: 56, name: &quot;Galleta Vainilla&quot;, brand: &quot;Arcor&quot;, presentation: &quot;Pack x 6&quot;, price: 8000, category: &quot;Snacks&quot;, logoColor: &quot;#dc2626&quot;, logoText: &quot;Arcor&quot;, isRental: false, min: 3 },<br/>            { id: 57, name: &quot;Papas Fritas Lisas&quot;, brand: &quot;Pringles&quot;, presentation: &quot;Lata 120g&quot;, price: 15000, category: &quot;Snacks&quot;, logoColor: &quot;#ef4444&quot;, logoText: &quot;Pringles&quot;, isRental: false, min: 3 },<br/>            { id: 58, name: &quot;Caramelos Surtidos&quot;, brand: &quot;Arcor&quot;, presentation: &quot;Bolsa 500g&quot;, price: 12000, category: &quot;Snacks&quot;, logoColor: &quot;#dc2626&quot;, logoText: &quot;Arcor&quot;, isRental: false, min: 3 },<br/>            <br/>            // ABARROTES: CONGELADOS (Mayorista - M√≠nimo 3)<br/>            { id: 59, name: &quot;Papas Fritas Prefritas&quot;, brand: &quot;McCain&quot;, presentation: &quot;1Kg Bolsa&quot;, price: 18000, category: &quot;Congelados&quot;, logoColor: &quot;#ef4444&quot;, logoText: &quot;McCain üçü&quot;, isRental: false, min: 3 },<br/>            { id: 60, name: &quot;Nuggets de Pollo&quot;, brand: &quot;Knorr&quot;, presentation: &quot;500g Caja&quot;, price: 25000, category: &quot;Congelados&quot;, logoColor: &quot;#f97316&quot;, logoText: &quot;Knorr&quot;, isRental: false, min: 3 },<br/>            { id: 61, name: &quot;Pizza Muzzarella&quot;, brand: &quot;Sadia&quot;, presentation: &quot;Unidad&quot;, price: 28000, category: &quot;Congelados&quot;, logoColor: &quot;#4f46e5&quot;, logoText: &quot;Sadia&quot;, isRental: false, min: 3 },<br/>            { id: 62, name: &quot;Vegetales Mixtos&quot;, brand: &quot;Quickfood&quot;, presentation: &quot;500g Bolsa&quot;, price: 11000, category: &quot;Congelados&quot;, logoColor: &quot;#0ea5e9&quot;, logoText: &quot;Quick&quot;, isRental: false, min: 3 },<br/>            { id: 63, name: &quot;Hielo en Cubos&quot;, brand: &quot;G√©nesis&quot;, presentation: &quot;2Kg Bolsa&quot;, price: 4500, category: &quot;Congelados&quot;, logoColor: &quot;#3b82f6&quot;, logoText: &quot;G√©nesis üßä&quot;, isRental: false, min: 3 },<br/>            { id: 64, name: &quot;Hamburguesa Carne&quot;, brand: &quot;Sadia&quot;, presentation: &quot;Caja x 4&quot;, price: 16000, category: &quot;Congelados&quot;, logoColor: &quot;#4f46e5&quot;, logoText: &quot;Sadia&quot;, isRental: false, min: 3 },<div></div>            // ABARROTES: LIMPIEZA (Mayorista - M√≠nimo 3)<br/>            { id: 65, name: &quot;Detergente Lavaplatos Lim√≥n&quot;, brand: &quot;Magistral&quot;, presentation: &quot;500ml&quot;, price: 9500, category: &quot;Limpieza&quot;, logoColor: &quot;#06b6d4&quot;, logoText: &quot;Magis üíß&quot;, isRental: false, min: 3 },<br/>            { id: 66, name: &quot;Lavandina Desinfectante&quot;, brand: &quot;Sapolio&quot;, presentation: &quot;1 Litro&quot;, price: 6000, category: &quot;Limpieza&quot;, logoColor: &quot;#4f46e5&quot;, logoText: &quot;Sapolio ‚ö°&quot;, isRental: false, min: 3 },<br/>            { id: 67, name: &quot;Jab√≥n en Polvo&quot;, brand: &quot;OMO&quot;, presentation: &quot;1Kg&quot;, price: 22000, category: &quot;Limpieza&quot;, logoColor: &quot;#0ea5e9&quot;, logoText: &quot;OMO&quot;, isRental: false, min: 3 },<br/>            { id: 68, name: &quot;Suavizante Concentrado&quot;, brand: &quot;Vanish&quot;, presentation: &quot;900ml&quot;, price: 15800, category: &quot;Limpieza&quot;, logoColor: &quot;#c026d3&quot;, logoText: &quot;Vanish&quot;, isRental: false, min: 3 },<br/>            { id: 69, name: &quot;Limpiador Vidrios&quot;, brand: &quot;Mr. M√∫sculo&quot;, presentation: &quot;500ml&quot;, price: 8500, category: &quot;Limpieza&quot;, logoColor: &quot;#22c55e&quot;, logoText: &quot;M√∫sculo&quot;, isRental: false, min: 3 },<br/>            { id: 70, name: &quot;Papel Higi√©nico Doble Hoja&quot;, brand: &quot;Nevada&quot;, presentation: &quot;Pack x 4&quot;, price: 14500, category: &quot;Limpieza&quot;, logoColor: &quot;#facc15&quot;, logoText: &quot;Nevada&quot;, isRental: false, min: 3 },<br/>            { id: 71, name: &quot;Jab√≥n de Tocador&quot;, brand: &quot;Dove&quot;, presentation: &quot;Unidad&quot;, price: 4000, category: &quot;Limpieza&quot;, logoColor: &quot;#0ea5e9&quot;, logoText: &quot;Dove&quot;, isRental: false, min: 3 },<br/>            { id: 72, name: &quot;Bolsa de Basura Reforzada&quot;, brand: &quot;Rey&quot;, presentation: &quot;Pack x 10&quot;, price: 10000, category: &quot;Limpieza&quot;, logoColor: &quot;#1f2937&quot;, logoText: &quot;Rey üëë&quot;, isRental: false, min: 3 },<br/>            { id: 73, name: &quot;Limpiador Desinfectante&quot;, brand: &quot;Lysoform&quot;, presentation: &quot;500ml&quot;, price: 9800, category: &quot;Limpieza&quot;, logoColor: &quot;#4f46e5&quot;, logoText: &quot;Lysoform&quot;, isRental: false, min: 3 },<br/>        ];<div></div>        // Estado Global de la Aplicaci√≥n<br/>        const state = {<br/>            cart: JSON.parse(localStorage.getItem(&#39;multigestiones_cart&#39;)) || [],<br/>            currentFilter: &#39;Todos&#39;,<br/>        };<div></div>        const elements = {<br/>            productList: document.getElementById(&#39;product-list&#39;),<br/>            filterContainer: document.getElementById(&#39;filter-container&#39;),<br/>            cartCount: document.getElementById(&#39;cart-count&#39;),<br/>            cartView: document.getElementById(&#39;cart-view&#39;),<br/>            catalogView: document.getElementById(&#39;catalog-view&#39;),<br/>            viewCartBtn: document.getElementById(&#39;view-cart-btn&#39;),<br/>            backToCatalogBtn: document.getElementById(&#39;back-to-catalog-btn&#39;),<br/>            cartItemDetails: document.getElementById(&#39;cart-item-details&#39;),<br/>            cartTotal: document.getElementById(&#39;cart-total&#39;),<br/>            emptyCartMessage: document.getElementById(&#39;empty-cart-message&#39;),<br/>            clientForm: document.getElementById(&#39;client-form&#39;),<br/>            confirmOrderBtn: document.getElementById(&#39;confirm-order-btn&#39;),<br/>            orderStatus: document.getElementById(&#39;order-status&#39;),<br/>            confirmationModal: document.getElementById(&#39;confirmation-modal&#39;),<br/>            closeModalBtn: document.getElementById(&#39;close-modal-btn&#39;),<br/>            minQtyAlert: document.getElementById(&#39;min-qty-alert&#39;),<br/>            loadingIndicator: document.getElementById(&#39;loading-indicator&#39;),<br/>            btnText: document.getElementById(&#39;btn-text&#39;),<br/>        };<div></div>        const allCategories = PRODUCTS.map(p =&gt; p.category);<br/>        const categories = [...new Set(allCategories)];<br/>        categories.unshift(&#39;Todos&#39;); <div></div>        // --- FUNCIONES DE CARRITO ---<div></div>        function saveCart() {<br/>            localStorage.setItem(&#39;multigestiones_cart&#39;, JSON.stringify(state.cart));<br/>            updateCartUI();<br/>            checkOrderValidity();<br/>        }<div></div>        function updateCartQuantity(productId, newQuantity) {<br/>            const itemIndex = state.cart.findIndex(item =&gt; item.id === productId);<br/>            if (itemIndex &gt; -1) {<br/>                if (newQuantity &lt;= 0) {<br/>                    state.cart.splice(itemIndex, 1); // Quitar si la cantidad es 0 o menos<br/>                } else {<br/>                    state.cart[itemIndex].quantity = newQuantity;<br/>                }<br/>            }<br/>            saveCart();<br/>            renderProducts(state.currentFilter); // Actualizar el cat√°logo<br/>        }<div></div>        function addToCart(productId) {<br/>            const product = PRODUCTS.find(p =&gt; p.id === productId);<br/>            if (!product) return;<div></div>            const existingItemIndex = state.cart.findIndex(item =&gt; item.id === productId);<br/>            const minQty = product.isRental ? 1 : 3;<div></div>            if (existingItemIndex &gt; -1) {<br/>                // Si ya est√° en el carrito, aumentar por la cantidad m√≠nima<br/>                state.cart[existingItemIndex].quantity += minQty;<br/>            } else {<br/>                // Si no est√°, a√±adir la cantidad m√≠nima<br/>                state.cart.push({<br/>                    id: productId,<br/>                    name: product.name,<br/>                    brand: product.brand,<br/>                    price: product.price,<br/>                    presentation: product.presentation,<br/>                    isRental: product.isRental,<br/>                    category: product.category,<br/>                    quantity: minQty,<br/>                });<br/>            }<div></div>            saveCart();<br/>        }<div></div>        function updateCartUI() {<br/>            elements.cartCount.textContent = state.cart.reduce((total, item) =&gt; total + item.quantity, 0);<br/>            renderCartSummary();<br/>        }<div></div>        function renderCartSummary() {<br/>            elements.cartItemDetails.innerHTML = &#39;&#39;;<br/>            let total = 0;<br/>            const itemsInCart = state.cart.length;<div></div>            if (itemsInCart === 0) {<br/>                elements.emptyCartMessage.classList.remove(&#39;hidden&#39;);<br/>                elements.confirmOrderBtn.disabled = true;<br/>                elements.cartTotal.textContent = &#39;Gs. 0&#39;;<br/>                return;<br/>            } else {<br/>                elements.emptyCartMessage.classList.add(&#39;hidden&#39;);<br/>            }<div></div>            state.cart.forEach(item =&gt; {<br/>                const itemTotal = item.price * item.quantity;<br/>                total += itemTotal;<br/>                <br/>                const itemDiv = document.createElement(&#39;div&#39;);<br/>                itemDiv.className = &#39;flex flex-col sm:flex-row justify-between items-start sm:items-center p-3 bg-white rounded-lg border&#39;;<br/>                <br/>                // Info Section<br/>                const infoSection = document.createElement(&#39;div&#39;);<br/>                infoSection.className = &#39;flex-grow mb-2 sm:mb-0&#39;;<br/>                infoSection.innerHTML = `<br/>                    &lt;p class=&quot;font-semibold text-gray-800&quot;&gt;${item.name}&lt;/p&gt;<br/>                    &lt;p class=&quot;text-xs text-gray-500 font-medium&quot;&gt;(${item.brand}) ${item.presentation}&lt;/p&gt;<br/>                    &lt;p class=&quot;text-sm font-medium text-blue-600&quot;&gt;Precio c/u: Gs. ${item.price.toLocaleString(&#39;es-ES&#39;)}&lt;/p&gt;<br/>                `;<div></div>                // Controls Section<br/>                const controlsSection = document.createElement(&#39;div&#39;);<br/>                controlsSection.className = &#39;flex items-center space-x-4 flex-shrink-0&#39;;<br/>                <br/>                // Quantity Control<br/>                const qtyControl = document.createElement(&#39;div&#39;);<br/>                qtyControl.className = &#39;qty-control flex items-center border rounded-lg&#39;;<br/>                qtyControl.innerHTML = `<br/>                    &lt;button type=&quot;button&quot; data-action=&quot;decrement&quot; data-id=&quot;${item.id}&quot; class=&quot;rounded-l-lg hover:bg-gray-300&quot;&gt;-&lt;/button&gt;<br/>                    &lt;input type=&quot;text&quot; value=&quot;${item.quantity}&quot; readonly class=&quot;text-center bg-transparent focus:outline-none&quot;&gt;<br/>                    &lt;button type=&quot;button&quot; data-action=&quot;increment&quot; data-id=&quot;${item.id}&quot; class=&quot;rounded-r-lg hover:bg-gray-300&quot;&gt;+&lt;/button&gt;<br/>                `;<br/>                <br/>                // Item Total<br/>                const totalSpan = document.createElement(&#39;span&#39;);<br/>                totalSpan.className = &#39;font-bold text-lg text-green-600 w-24 text-right flex-shrink-0&#39;;<br/>                totalSpan.textContent = `Gs. ${itemTotal.toLocaleString(&#39;es-ES&#39;)}`;<div></div>                controlsSection.appendChild(qtyControl);<br/>                controlsSection.appendChild(totalSpan);<div></div>                itemDiv.appendChild(infoSection);<br/>                itemDiv.appendChild(controlsSection);<br/>                <br/>                elements.cartItemDetails.appendChild(itemDiv);<br/>            });<div></div>            elements.cartTotal.textContent = `Gs. ${total.toLocaleString(&#39;es-ES&#39;)}`;<div></div>            // Adjuntar listener para control de cantidad<br/>            document.querySelectorAll(&#39;.qty-control button&#39;).forEach(button =&gt; {<br/>                button.addEventListener(&#39;click&#39;, (e) =&gt; {<br/>                    const productId = parseInt(e.target.dataset.id);<br/>                    const action = e.target.dataset.action;<br/>                    const item = state.cart.find(i =&gt; i.id === productId);<br/>                    if (!item) return;<div></div>                    let newQty = item.quantity;<div></div>                    if (action === &#39;increment&#39;) {<br/>                        newQty += 1;<br/>                    } else if (action === &#39;decrement&#39;) {<br/>                        newQty -= 1;<br/>                        if (newQty &lt; 0) newQty = 0; // Evitar negativos<br/>                    }<div></div>                    updateCartQuantity(productId, newQty);<br/>                });<br/>            });<div></div>            checkOrderValidity();<br/>        }<div></div>        function checkOrderValidity() {<br/>            let isValid = state.cart.length &gt; 0;<br/>            let needsMinQtyAlert = false;<br/>            <br/>            state.cart.forEach(item =&gt; {<br/>                // Regla: Productos NO de Alquiler deben ser &gt;= 3<br/>                if (!item.isRental &amp;&amp; item.quantity &lt; 3) {<br/>                    isValid = false;<br/>                    needsMinQtyAlert = true;<br/>                }<br/>            });<div></div>            if (needsMinQtyAlert) {<br/>                elements.minQtyAlert.classList.remove(&#39;hidden&#39;);<br/>            } else {<br/>                elements.minQtyAlert.classList.add(&#39;hidden&#39;);<br/>            }<div></div>            // Habilitar el bot√≥n de confirmar solo si el carrito no est√° vac√≠o, cumple con la cantidad m√≠nima y el formulario es v√°lido<br/>            elements.confirmOrderBtn.disabled = !isValid || !elements.clientForm.checkValidity();<br/>        }<div></div>        // --- FUNCIONES DE RENDERIZADO DEL CAT√ÅLOGO ---<div></div>        function createProductItem(product) {<br/>            const item = document.createElement(&#39;div&#39;);<br/>            const isRental = product.isRental;<br/>            const minQty = product.min;<br/>            const itemInCart = state.cart.find(i =&gt; i.id === product.id);<div></div>            item.className = &#39;product-item p-4 sm:p-5 flex flex-col sm:flex-row items-center justify-between bg-white rounded-lg border-2 &#39; + (isRental ? &#39;border-green-300&#39; : &#39;border-gray-100&#39;);<br/>            <br/>            // Secci√≥n Izquierda (Logo e Info)<br/>            const leftSection = document.createElement(&#39;div&#39;);<br/>            leftSection.className = &#39;flex items-start space-x-4 sm:space-x-6 w-full sm:w-2/3 mb-3 sm:mb-0&#39;;<div></div>            // Logo Placeholder<br/>            const logo = document.createElement(&#39;div&#39;);<br/>            logo.className = &#39;logo-placeholder shadow-lg flex-shrink-0&#39;;<br/>            logo.style.backgroundColor = product.logoColor;<br/>            logo.textContent = product.logoText;<br/>            <br/>            // Info del Producto<br/>            const info = document.createElement(&#39;div&#39;);<br/>            info.innerHTML = `<br/>                &lt;p class=&quot;text-lg font-bold text-gray-900&quot;&gt;${product.name}&lt;/p&gt;<br/>                &lt;p class=&quot;text-sm text-gray-500 font-medium mt-0.5&quot;&gt;<br/>                    ${product.presentation} | &lt;span class=&quot;font-semibold text-xs ${isRental ? &#39;text-red-600&#39; : &#39;text-blue-600&#39;}&quot;&gt;<br/>                        ${isRental ? &#39;Alquiler/Evento&#39; : `Mayorista (M√≠nimo ${minQty})`}<br/>                    &lt;/span&gt;<br/>                    ${itemInCart ? `&lt;span class=&quot;text-sm font-extrabold text-green-600 ml-2&quot;&gt;(En carrito: ${itemInCart.quantity})&lt;/span&gt;` : &#39;&#39;}<br/>                &lt;/p&gt;<br/>            `;<div></div>            leftSection.appendChild(logo);<br/>            leftSection.appendChild(info);<div></div>            // Secci√≥n Derecha (Interacci√≥n)<br/>            const rightSection = document.createElement(&#39;div&#39;);<br/>            rightSection.className = &#39;flex flex-col items-end space-y-2 w-full sm:w-1/3 justify-end&#39;;<div></div>            // Precio<br/>            const priceSpan = `&lt;span class=&quot;price-badge ${isRental ? &#39;bg-red-500 text-white&#39; : &#39;bg-yellow-400 text-gray-900&#39;}&quot;&gt;Gs. ${product.price.toLocaleString(&#39;es-ES&#39;)}&lt;/span&gt;`;<br/>            rightSection.innerHTML += priceSpan;<div></div>            // Bot√≥n Agregar<br/>            const addButton = document.createElement(&#39;button&#39;);<br/>            addButton.className = &#39;add-to-cart-btn w-32 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 rounded-lg text-sm transition duration-150 shadow&#39;;<br/>            addButton.textContent = `Agregar (${minQty} U.)`;<br/>            addButton.dataset.id = product.id;<br/>            addButton.addEventListener(&#39;click&#39;, (e) =&gt; {<br/>                addToCart(parseInt(e.target.dataset.id));<br/>            });<br/>            <br/>            rightSection.appendChild(addButton);<div></div>            item.appendChild(leftSection);<br/>            item.appendChild(rightSection);<br/>            <br/>            return item;<br/>        }<div></div>        function renderProducts(category) {<br/>            elements.productList.innerHTML = &#39;&#39;;<br/>            <br/>            const filteredProducts = PRODUCTS.filter(product =&gt; <br/>                category === &#39;Todos&#39; || product.category === category<br/>            ).sort((a, b) =&gt; {<br/>                if (a.category !== b.category) return a.category.localeCompare(b.category);<br/>                if (a.brand !== b.brand) return a.brand.localeCompare(b.brand);<br/>                return a.name.localeCompare(b.name);<br/>            });<div></div>            if (filteredProducts.length === 0) {<br/>                elements.productList.innerHTML = `&lt;p class=&quot;text-center text-gray-500 py-12 text-lg&quot;&gt;No se encontraron productos en la categor√≠a &quot;${category}&quot;.&lt;/p&gt;`;<br/>                return;<br/>            }<div></div>            let currentCategoryTitle = &#39;&#39;;<br/>            let currentBrandTitle = &#39;&#39;;<br/>            <br/>            filteredProducts.forEach(product =&gt; {<br/>                if (category === &#39;Todos&#39; &amp;&amp; product.category !== currentCategoryTitle) {<br/>                    currentCategoryTitle = product.category;<br/>                    const catTitle = document.createElement(&#39;h2&#39;);<br/>                    catTitle.className = &#39;text-2xl font-extrabold text-blue-900 mt-8 mb-4 pb-2 border-b-4 border-blue-500&#39;;<br/>                    catTitle.textContent = product.category.toUpperCase();<br/>                    elements.productList.appendChild(catTitle);<br/>                    currentBrandTitle = &#39;&#39;; <br/>                }<div></div>                if (product.brand !== currentBrandTitle) {<br/>                    currentBrandTitle = product.brand;<br/>                    const brandTitle = document.createElement(&#39;div&#39;);<br/>                    brandTitle.className = &#39;brand-title&#39;;<br/>                    brandTitle.textContent = `MARCA: ${product.brand}`;<br/>                    elements.productList.appendChild(brandTitle);<br/>                }<div></div>                elements.productList.appendChild(createProductItem(product));<br/>            });<div></div>            document.querySelectorAll(&#39;.filter-button&#39;).forEach(btn =&gt; {<br/>                if (btn.textContent.trim() === category) {<br/>                    btn.classList.add(&#39;active&#39;);<br/>                } else {<br/>                    btn.classList.remove(&#39;active&#39;);<br/>                }<br/>            });<br/>        }<div></div>        function setupFilters() {<br/>            elements.filterContainer.innerHTML = &#39;&#39;;<br/>            categories.forEach(cat =&gt; {<br/>                const button = document.createElement(&#39;button&#39;);<br/>                button.className = &#39;filter-button bg-gray-200 text-gray-700 hover:bg-gray-300 py-2 px-4 rounded-full text-sm shadow-md transition duration-200&#39;;<br/>                button.textContent = cat;<br/>                button.addEventListener(&#39;click&#39;, () =&gt; {<br/>                    state.currentFilter = cat;<br/>                    renderProducts(cat);<br/>                });<br/>                elements.filterContainer.appendChild(button);<br/>            });<br/>            state.currentFilter = &#39;Todos&#39;;<br/>            renderProducts(state.currentFilter);<br/>        }<br/>        <br/>        // --- ENV√çO DE ORDEN (FIREBASE) ---<div></div>        async function submitOrder(e) {<br/>            e.preventDefault();<div></div>            if (state.cart.length === 0) {<br/>                console.error(&quot;El carrito est√° vac√≠o. No se puede enviar la orden.&quot;);<br/>                return;<br/>            }<br/>            if (!window.db || !window.auth.currentUser) {<br/>                elements.orderStatus.textContent = &quot;Error: Conexi√≥n con la base de datos no disponible.&quot;;<br/>                elements.orderStatus.classList.remove(&#39;hidden&#39;);<br/>                elements.orderStatus.classList.add(&#39;text-red-600&#39;);<br/>                return;<br/>            }<div></div>            elements.confirmOrderBtn.disabled = true;<br/>            elements.btnText.textContent = &quot;Enviando...&quot;;<br/>            elements.orderStatus.classList.add(&#39;hidden&#39;);<div></div>            const total = state.cart.reduce((sum, item) =&gt; sum + (item.price * item.quantity), 0);<br/>            <br/>            const clientInfo = {<br/>                name: elements.clientForm[&#39;client-name&#39;].value,<br/>                phone: elements.clientForm[&#39;client-phone&#39;].value,<br/>                address: elements.clientForm[&#39;client-address&#39;].value,<br/>                userId: window.auth.currentUser.uid,<br/>            };<div></div>            // Mapear los items para guardar solo la informaci√≥n esencial<br/>            const simplifiedItems = state.cart.map(item =&gt; ({<br/>                id: item.id,<br/>                name: item.name,<br/>                brand: item.brand,<br/>                quantity: item.quantity,<br/>                price: item.price,<br/>                subtotal: item.quantity * item.price,<br/>                isRental: item.isRental,<br/>            }));<div></div><br/>            const orderData = {<br/>                clientInfo: clientInfo,<br/>                items: simplifiedItems,<br/>                totalAmount: total,<br/>                status: &#39;PENDIENTE&#39;,<br/>                timestamp: window.firebaseExports.serverTimestamp(),<br/>                appId: typeof __app_id !== &#39;undefined&#39; ? __app_id : &#39;default-app-id&#39;,<br/>            };<div></div>            const db = window.db;<br/>            const { addDoc, collection } = window.firebaseExports;<br/>            // Guardar en la colecci√≥n p√∫blica de √≥rdenes<br/>            const collectionPath = `/artifacts/${typeof __app_id !== &#39;undefined&#39; ? __app_id : &#39;default-app-id&#39;}/public/data/orders`;<div></div>            try {<br/>                await addDoc(collection(db, collectionPath), orderData);<br/>                <br/>                // Mostrar modal de √©xito<br/>                elements.confirmationModal.classList.remove(&#39;hidden&#39;);<div></div>                // Limpiar carrito<br/>                state.cart = [];<br/>                localStorage.removeItem(&#39;multigestiones_cart&#39;);<div></div>            } catch (error) {<br/>                console.error(&quot;Error al guardar la orden en Firestore:&quot;, error);<br/>                elements.orderStatus.textContent = &quot;Error al enviar el pedido. Intenta nuevamente.&quot;;<br/>                elements.orderStatus.classList.remove(&#39;hidden&#39;);<br/>                elements.orderStatus.classList.add(&#39;text-red-600&#39;);<br/>                elements.confirmOrderBtn.disabled = false;<br/>                elements.btnText.textContent = &quot;CONFIRMAR PEDIDO Y ENVIAR&quot;;<br/>            }<br/>        }<div></div>        // --- MANEJO DE VISTAS Y EVENTOS ---<div></div>        function setupEventListeners() {<br/>            elements.viewCartBtn.addEventListener(&#39;click&#39;, () =&gt; {<br/>                elements.catalogView.classList.add(&#39;hidden&#39;);<br/>                elements.cartView.classList.remove(&#39;hidden&#39;);<br/>                renderCartSummary();<br/>            });<div></div>            elements.backToCatalogBtn.addEventListener(&#39;click&#39;, () =&gt; {<br/>                elements.cartView.classList.add(&#39;hidden&#39;);<br/>                elements.catalogView.classList.remove(&#39;hidden&#39;);<br/>                renderProducts(state.currentFilter);<br/>            });<div></div>            elements.clientForm.addEventListener(&#39;submit&#39;, submitOrder);<br/>            <br/>            elements.clientForm.addEventListener(&#39;input&#39;, checkOrderValidity);<div></div>            elements.closeModalBtn.addEventListener(&#39;click&#39;, () =&gt; {<br/>                elements.confirmationModal.classList.add(&#39;hidden&#39;);<br/>                elements.cartView.classList.add(&#39;hidden&#39;);<br/>                elements.catalogView.classList.remove(&#39;hidden&#39;);<br/>                elements.btnText.textContent = &quot;CONFIRMAR PEDIDO Y ENVIAR&quot;;<br/>                updateCartUI();<br/>                renderProducts(&#39;Todos&#39;);<br/>            });<br/>        }<div></div>        // --- INICIALIZACI√ìN PRINCIPAL ---<br/>        window.mainApp = {<br/>            init: () =&gt; {<br/>                elements.loadingIndicator.classList.add(&#39;hidden&#39;);<br/>                setupFilters();<br/>                setupEventListeners();<br/>                updateCartUI();<br/>            }<br/>        };<div></div>        // Mostrar indicador de carga mientras espera Firebase<br/>        elements.loadingIndicator.classList.remove(&#39;hidden&#39;);<br/>    &lt;/script&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;<div></div>